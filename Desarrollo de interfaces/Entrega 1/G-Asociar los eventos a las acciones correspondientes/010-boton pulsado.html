<!doctype html>
<html>
  <body>
    <style>
      canvas {
        border: 1px solid grey;
        cursor: crosshair;
      } 
    </style>
    <canvas></canvas>
    
    <script>
      var pulsado = false;                                    // De entrada no estoy pulsando el raton
      document.onmousedown = function(){pulsado = true;}      // Cuando pulso el boton izquierdo, cambio la variable
      document.onmouseup = function(){pulsado = false;}       // Cuando despulso, cambio la variable

      const lienzo = document.querySelector("canvas");        // Atrapo el lienzo
      const contexto = lienzo.getContext("2d");               // Atrapo el contexto
      lienzo.width = 512;                                     // Le doy anchura al lienzo
      lienzo.height = 512;                                    // Le doy altura al lienzo
      
      // Cargar la imagen de fondo
      const imagenFondo = new Image();
      imagenFondo.src = 'colorear.jpg';               // Especifica la ruta de la imagen de fondo

      imagenFondo.onload = function() {                       // Espera a que la imagen se cargue
        contexto.drawImage(imagenFondo, 0, 0, lienzo.width, lienzo.height);  // Dibujar la imagen en el canvas

        lienzo.onmousemove = function(e) {                    // Cuando mueva el raton por el lienzo
          if(pulsado) {                                       // Si tengo el raton pulsado
            contexto.fillRect(e.offsetX, e.offsetY, 2, 2);    // Dibuja en la pantalla
          }
        }
      }
    </script>
  </body>
</html>
